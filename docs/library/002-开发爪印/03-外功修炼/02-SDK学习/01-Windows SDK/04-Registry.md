### 注册表兼容性说明
因为Windows SDK自从Vista开始，与Xp的区别就比较大了。因此有部分Windows API要想兼容常见的Windows操作系统，那么就需要针对特定的操作系统来进行相应的处理了。比方说，删除某个注册表根目录下的所有子键这个功能，在Xp系统下是没有直接的操作函数的，倒是有一个RegDeleteKey函数可以直接删除某个子键，但是没有删除子键树的功能，换言之，假设当前注册表路径下的子键还有其他子键，那么相对而言，就是一个低层次的主键了，此时RegDeleteKey是无法正常删除它的。但是在Vista系统则是不然，Microsoft开发团队专门提供了RegDeleteTree函数来进行直接删除等操作。因此为了可以编写出通用的注册表子键删除函数，还需要对此进行二次封装。同理，类似的问题在GetRegValue也是出现的，此函数在Xp系统是不支持的，因而，还得直接使用RegQueryValueEx函数来获取这些数值。以上就是关于不同版本的Windows操作系统下的Windows API的版本变迁。但是相关的兼容性问题并不单单是系统版本哦，其实还有x32bit和x64bit的区别。这个区别不单单是体现在系统上，同样也体现在应用程序上。在x64bit下，可以正常运行x32bit和x64bit应用程序，但是x32bit却是仅仅可以运行x32bit。这个问题姑且不管，问题是当x32bit应用程序读写x64bit的程序时，就会出现一个问题了，比方说，读写system32系统文件夹，就会遇到文件夹重定向的问题；另一方面，这个重定向的问题同样出现在注册表的读写之中。

### 操作注册表的方法
Microsoft团队为开发者提供了多种可以操作注册表的方式，大致罗列如下：
- 通过dos或powsershell命令来直接操作注册表的读写
- 使用.reg文件来操作，这种方式的实质就是调用regedit.exe来操作注册表
- 使用各个不同系统版本的WMI对象来管理这些注册表
- 直接调用Windows SDK来操作注册表
其中，对于开发人员来说，最后一个无疑是诸多开发者比较乐意的操作方式。

### 注册表开发的常见注意事项
- 我们在查询注册表的键值时，往往需要查询两次，第一次是为了获得此键值对应的注册表数值类型以及所需要的内存大小，用来动态分配创建所需要的内存空间；而第二次则是为了将注册表键值的数据读取出来，将其保存起来。
- 在注册表的读写之中，其实我们还会遇到因为权限不足而无法正常读写的问题，另外就是因为第三方安全软件的驱动保护，导致读取失败等等。因此，在某些时候，我们需要使用“以管理员身份运行”，或者为待操作的主程序自行提权等一系列敏感操作。

### 官方资源推荐
想看官方的在线连接，[<a href="http://msdn.microsoft.com/EN-US/library/ms724871(v=VS.85,d=hv.2).aspx" target="blank" >点我吧</a>]

>附件下载：[RegEditor](assets/002/03/02/01/RegEditor.rar)